<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾é‡‘æµæˆ°è¨˜ï¼šä¸Šç­æ—çš„é€†è¥²</title>
    <style>
        :root {
            --bg-body: #1a252f;
            --bg-console: #2c3e50;
            --bg-panel: #34495e;
            --text-main: #ecf0f1;
            --accent: #f39c12;
            --success: #27ae60;
            --danger: #c0392b;
            --btn-blog: #16a085;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .game-console {
            width: 100%;
            max-width: 900px;
            height: 95vh;
            background-color: var(--bg-console);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            padding: 15px;
            border: 1px solid #465c71;
            overflow-y: auto;
        }

        /* é ‚éƒ¨å°èˆªåˆ— */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .game-title h1 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--accent);
            text-shadow: 2px 2px 0px rgba(0,0,0,0.3);
        }
        .game-title span {
            font-size: 0.9rem;
            color: #bdc3c7;
            margin-left: 10px;
        }

        .blog-btn {
            background-color: var(--btn-blog);
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 0px #117a65;
        }
        .blog-btn:hover {
            transform: translateY(2px);
            box-shadow: 0 2px 0px #117a65;
        }
        .blog-btn::before { content: "ğŸ“–"; }

        /* å„€è¡¨æ¿ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }
        @media (max-width: 600px) {
            .dashboard-grid { grid-template-columns: repeat(2, 1fr); }
            .game-console { height: 100vh; border-radius: 0; }
        }

        .stat-box {
            background: var(--bg-panel);
            padding: 8px;
            border-radius: 8px;
            text-align: center;
            border-left: 3px solid var(--accent);
        }
        .stat-label { font-size: 0.8rem; color: #bdc3c7; margin-bottom: 2px;}
        .stat-val { font-size: 1.1rem; font-weight: bold; }

        .progress-bg { background: #222; height: 6px; border-radius: 3px; margin-top: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--success); width: 80%; transition: width 0.3s; }

        /* éŠæˆ²ä¸»ç•«é¢ */
        .main-stage {
            flex: 1;
            background-color: #000;
            border-radius: 10px;
            position: relative;
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
            border: 2px solid #555;
            transition: background 0.5s;
        }

        .stage-overlay {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            backdrop-filter: blur(2px);
        }

        .bg-level1 { background-image: url('https://images.unsplash.com/photo-1542744173-8e7e53415bb0?auto=format&fit=crop&w=800&q=80'); } 
        .bg-level2 { background-image: url('https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&w=800&q=80'); } 
        .bg-level3 { background-image: url('https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=800&q=80'); } 
        .bg-level4 { background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=80'); } 

        .npc-tag {
            display: inline-block;
            color: var(--accent);
            font-weight: bold;
            border: 1px solid var(--accent);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }
        .story-text { font-size: 1.1rem; line-height: 1.5; min-height: 60px; }

        .invest-panel {
            background: rgba(44, 62, 80, 0.9);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #7f8c8d;
        }
        .stock-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-size: 0.9rem;}

        .action-grid { display: grid; gap: 10px; }
        button {
            background: var(--accent);
            border: none;
            color: #fff;
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            text-align: left;
            transition: filter 0.2s;
            position: relative;
        }
        button:hover { filter: brightness(1.15); }
        button span { display: block; font-size: 0.75rem; opacity: 0.8; margin-top: 2px; }

        .btn-buy { background: #2980b9; text-align: center; padding: 8px; font-size: 0.9rem;}
        .btn-sell { background: #c0392b; text-align: center; padding: 8px; font-size: 0.9rem;}
        .btn-next { background: #7f8c8d; text-align: center; font-weight: bold; }

        .footer-guide {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #95a5a6;
            text-align: center;
            padding-top: 10px;
            border-top: 1px dashed #555;
        }
        .footer-guide b { color: var(--warning-color); }

        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 999;
        }
        .modal-box {
            background: var(--bg-panel); padding: 25px; border-radius: 12px;
            max-width: 400px; width: 90%; text-align: center; border: 2px solid var(--accent);
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }
        .toast {
            position: fixed; bottom: 10%; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.85); padding: 8px 16px; border-radius: 20px;
            border: 1px solid var(--accent); pointer-events: none; opacity: 0; transition: opacity 0.3s;
        }
    </style>
</head>
<body>

<div class="game-console">
    <!-- é ‚éƒ¨å°èˆª -->
    <div class="top-bar">
        <div class="game-title">
            <h1>ç¾é‡‘æµæˆ°è¨˜ <span>ä¸Šç­æ—çš„é€†è¥²</span></h1>
        </div>
        <a href="https://vocus.cc/user/@WUCJ" target="_blank" class="blog-btn">
            æ”»ç•¥èˆ‡ç†è²¡ç­†è¨˜
        </a>
    </div>

    <!-- å„€è¡¨æ¿ -->
    <div class="dashboard-grid">
        <div class="stat-box">
            <div class="stat-label">ç¬¬ <span id="game-year">1</span> å¹´ <span id="game-month">1</span> æœˆ</div>
            <!-- é€™è£¡æ”¹æˆé¡¯ç¤ºä¸­æ–‡ç« ç¯€ -->
            <div class="stat-label" id="level-name" style="color:var(--accent); font-weight:bold;">ç¬¬ä¸€ç« ï¼šç”Ÿå­˜çš„ç¸«éš™</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">ğŸ’° ç¾é‡‘</div>
            <div class="stat-val" id="cash-display">$50,000</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">ğŸ“ˆ è³‡ç”¢</div>
            <div class="stat-val" id="asset-display">$0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">ğŸ§  ç²¾ç¥ (<span id="sanity-val">80</span>)</div>
            <div class="progress-bg"><div class="progress-fill" id="sanity-bar"></div></div>
        </div>
    </div>

    <!-- éŠæˆ²ä¸»ç•«é¢ -->
    <div class="main-stage bg-level1" id="main-bg">
        <div class="stage-overlay">
            <div class="npc-tag" id="npc-tag">ğŸ‘¨â€ğŸ’¼ ä¸»è§’å…§å¿ƒ</div>
            <div class="story-text" id="story-text">è¼‰å…¥ä¸­...</div>

            <div class="invest-panel" id="invest-panel" style="display: none; margin-top: 10px;">
                <div class="stock-row">
                    <span><b>00878</b> (æŒæœ‰: <span id="qty-878">0</span>)</span>
                    <span>ç¾åƒ¹: <b id="price-878" style="color:#f39c12">$15.00</b></span>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                    <button class="btn-buy" onclick="game.trade('00878', 1)">è²·å…¥ (-$<span id="cost-878">15000</span>)</button>
                    <button class="btn-sell" onclick="game.trade('00878', -1)">è³£å‡º</button>
                </div>
            </div>
        </div>

        <div class="action-grid" id="action-area"></div>
    </div>

    <!-- åº•éƒ¨æ”»ç•¥ -->
    <div class="footer-guide">
        ğŸ’¡ <b>ç”Ÿå­˜æç¤ºï¼š</b>ç²¾ç¥å€¼ < 30 æœƒå´©æ½°ç ´ç”¢ï½œå„ªå…ˆå­˜ 10 è¬é å‚™é‡‘ï½œå°å¿ƒè¨‚é–±åˆ¶é™·é˜±
        <br>
        <a href="https://vocus.cc/user/@WUCJ" target="_blank" style="color:#16a085; text-decoration:none;">
            [é–±è®€å®Œæ•´æ”»ç•¥ï¼šWUCJ ç†è²¡ç­†è¨˜]
        </a>
    </div>
</div>

<div class="toast" id="toast">æç¤ºè¨Šæ¯</div>

<!-- å½ˆçª— -->
<div class="modal" id="modal">
    <div class="modal-box">
        <h2 id="modal-title" style="color:var(--accent);">æ¨™é¡Œ</h2>
        <p id="modal-desc" style="line-height: 1.6; color: #ddd;">å…§å®¹</p>
        <div id="modal-blog-btn" style="display:none; margin: 15px 0;">
            <a href="https://vocus.cc/user/@WUCJ" target="_blank" class="blog-btn" style="justify-content:center; background:#e67e22;">
                ğŸ‘‰ é»æ­¤é–±è®€ï¼šç¿»èº«æ”»ç•¥
            </a>
        </div>
        <button onclick="game.closeModal()" id="modal-action-btn" class="btn-next" style="width:100%;">ç¹¼çºŒ</button>
    </div>
</div>

<script>
    const CONFIG = {
        salary: 35000, 
        baseExpense: 28000, 
        inflation: 0.002,   
        yield: 0.015        
    };

    const LEVEL_EVENTS = {
        1: [
            {
                npc: "ğŸ“º ä¸²æµå¹³å°",
                text: "Netflixã€Disney+ã€Youtube Premium...å…¨è¨‚æ¯æœˆå™´ $600ï¼Œä½†è¿½åŠ‡æ˜¯å”¯ä¸€æ•‘è´–ã€‚",
                choices: [
                    { text: "å…¨è¨‚ï¼ç²¾ç¥ç³§é£Ÿä¸èƒ½çœ", sub: "æœˆæ”¯å‡º +$600 / ç²¾ç¥ +15", action: 'monthly_sub', cost: 600, sanity: 15 },
                    { text: "çœ‹å…è²»çš„æœ‰å»£å‘Šå°±å¥½", sub: "çœéŒ¢ / ç²¾ç¥ -5", cost: 0, sanity: -5 }
                ]
            },
            {
                npc: "âš ï¸ è©¦ç”¨é™·é˜±",
                text: "æ…˜äº†ï¼æŸå€‹ä¿®åœ– App å…è²»è©¦ç”¨ä¸‰å¤©å¿˜è¨˜å–æ¶ˆï¼Œè¢«æ‰£äº†ä¸€å¹´å¹´è²»...",
                choices: [
                    { text: "å«æ·šä»˜æ¬¾", sub: "é‡‘éŒ¢ -$3,000 / ç²¾ç¥ -20", cost: 3000, sanity: -20 }
                ]
            },
            {
                npc: "â˜ï¸ é›²ç«¯ç©ºé–“",
                text: "æ‰‹æ©Ÿè·³å‡ºã€Œå„²å­˜ç©ºé–“ä¸è¶³ã€ï¼Œç…§ç‰‡éƒ½æ²’å‚™ä»½ã€‚è¦è¨‚é–±é›²ç«¯ç©ºé–“å—ï¼Ÿ",
                choices: [
                    { text: "è¨‚é–± 2TB æ–¹æ¡ˆ", sub: "æœˆæ”¯å‡º +$300 / ç²¾ç¥ +5", action: 'monthly_sub', cost: 300, sanity: 5 },
                    { text: "å‹¤å‹é»æ‰‹å‹•å‚™ä»½åˆ°é›»è…¦", sub: "éº»ç…© / ç²¾ç¥ -5", cost: 0, sanity: -5 }
                ]
            },
            {
                npc: "â˜• éš”å£åŒäº‹",
                text: "ã€Œæ¬¸ï¼ä»Šå¤©æ˜ŸæœŸäº”ï¼Œè¦ä¸è¦è¨‚é‚£å®¶è¶…è²´çš„æ˜Ÿå†°æ¨‚ï¼Ÿä¸€æ¯ 150 å–”ï¼ä¸å–æ²’è©±é¡Œå•¦ï½ã€",
                choices: [
                    { text: "å–å•¦ï¼ä¸Šç­é‚£éº¼è‹¦", sub: "é‡‘éŒ¢ -$150 / ç²¾ç¥ +10", cost: 150, sanity: 10 },
                    { text: "ä¸äº†ï¼Œæˆ‘å–å…¬å¸é£²æ°´æ©Ÿ", sub: "é‡‘éŒ¢ -$0 / ç²¾ç¥ -5", cost: 0, sanity: -5 }
                ]
            },
            {
                npc: "ğŸ§ 3C ç½é›£",
                text: "ä½ ç™¼ç¾è—ç‰™è€³æ©Ÿå°‘äº†ä¸€éš»...æ‰¾éå…¨èº«éƒ½æ²’æœ‰ï¼Œå¿ƒæ…‹å´©äº†ã€‚",
                choices: [
                    { text: "è²·æ–°çš„ Airpods Pro", sub: "é‡‘éŒ¢ -$7,500 / ç²¾ç¥ +20", cost: 7500, sanity: 20 },
                    { text: "æ”¹ç”¨è·¯é‚Šæ”¤æœ‰ç·šè€³æ©Ÿ", sub: "é‡‘éŒ¢ -$300 / ç²¾ç¥ -10", cost: 300, sanity: -10 }
                ]
            },
            {
                npc: "ğŸ‘® äº¤é€šè­¦å¯Ÿ",
                text: "ã€Œå—¶å—¶ï¼è¶…é€Ÿäº†å–”ã€‚ã€ä½ æ”¶åˆ°ä¸€å¼µåœ‹å®¶ç´šè¿½ç„¦ç…§ï¼Œç½°å–® $1,800 å…ƒã€‚",
                choices: [
                    { text: "ä¹–ä¹–ç¹³ç½°å–®", sub: "é‡‘éŒ¢ -$1,800 / ç²¾ç¥ -15", cost: 1800, sanity: -15 },
                    { text: "ä¸Šç¶²æŠ±æ€¨ç™¼æ´©", sub: "é‡‘éŒ¢ -$1,800 / ç²¾ç¥ -5", cost: 1800, sanity: -5 }
                ]
            },
            {
                npc: "ğŸ¦· ç‰™é†«è¨ºæ‰€",
                text: "ç‰™é½’çªç„¶åŠ‡ç—›ï¼ç‰™é†«èªªï¼šã€Œé€™è¦æ ¹ç®¡æ²»ç™‚ï¼ŒåŠ ç‰™å¥—è¦ 20,000 å–”ã€‚ã€",
                choices: [
                    { text: "ç—›åˆ°ä¸è¡Œï¼ŒèŠ±éŒ¢æ¶ˆç½", sub: "é‡‘éŒ¢ -$20,000 / ç²¾ç¥ -15", cost: 20000, sanity: -15 },
                    { text: "åƒæ­¢ç—›è—¥æ’è‘— (ä¸å»ºè­°)", sub: "ç²¾ç¥ -30 / é¢¨éšªæ¥µå¤§", cost: 200, sanity: -30 }
                ]
            },
            {
                npc: "ğŸ”‘ æˆ¿æ±é˜¿å§¨",
                text: "ã€Œå°‘å¹´ä»”ï¼Œæœ€è¿‘é›»è²»æ¼²äº†ï¼Œä¸‹å€‹æœˆæˆ¿ç§Ÿè¦èª¿æ¼² $1,000 å–”ã€‚ã€",
                choices: [
                    { text: "å«æ·šæ¥å—", sub: "æœˆæ”¯å‡º +$1,000 / ç²¾ç¥ -10", action: 'monthly_sub', cost: 1000, sanity: -10 },
                    { text: "æˆ‘ä¸ç§Ÿäº†ï¼æ¬å®¶ï¼", sub: "æ¬å®¶è²» -$8,000 / ç²¾ç¥ -20", cost: 8000, sanity: -20 }
                ]
            }
        ],
        2: [ 
            {
                npc: "ğŸ‹ï¸ å¥èº«æˆ¿æ¥­å‹™",
                text: "ã€Œç¾åœ¨ç°½ç´„ä¸€å¹´ï¼Œæ¯å€‹æœˆåªè¦ $1,200 å–”ï¼æŠ•è³‡å¥åº·æœ€åˆ’ç®—ï¼ã€",
                choices: [
                    { text: "ç°½äº†ï¼æˆ‘è¦è®Šå£¯", sub: "æœˆæ”¯å‡º +$1,200 / ç²¾ç¥ +10", action: 'monthly_sub', cost: 1200, sanity: 10 },
                    { text: "å»å…¬åœ’è·‘æ­¥å°±å¥½", sub: "çœéŒ¢ / ç²¾ç¥ +5", cost: 0, sanity: 5 }
                ]
            },
            {
                npc: "ğŸ¤ åœ‹éš›å·¨æ˜Ÿæ¼”å”±æœƒ",
                text: "ä½ æœ€æ„›çš„éŸ“åœ˜è¦ä¾†å°ç£äº†ï¼å®˜ç¶²æ¶ä¸åˆ°ç¥¨ï¼Œé»ƒç‰›ç¥¨ä¸€å¼µç‚’åˆ° 8,000...",
                choices: [
                    { text: "è²·é»ƒç‰›ï¼é€™è¼©å­å°±çœ‹é€™ä¸€æ¬¡", sub: "é‡‘éŒ¢ -$8,000 / ç²¾ç¥ +40", cost: 8000, sanity: 40 },
                    { text: "ç®—äº†ï¼Œçœ‹ YouTube å›æ”¾", sub: "é‡‘éŒ¢ -$0 / ç²¾ç¥ -15", cost: 0, sanity: -15 }
                ]
            },
            {
                npc: "ğŸš„ åœ‹å…§å°æ—…è¡Œ",
                text: "é€£å‡åˆ°äº†ï¼Œæœ‹å‹æªå»å°å—ä¸‰å¤©å…©å¤œçˆ†åƒä¹‹æ—…ã€‚",
                choices: [
                    { text: "èµ°å•Šï¼ç‰›è‚‰æ¹¯æˆ‘ä¾†äº†", sub: "é‡‘éŒ¢ -$5,000 / ç²¾ç¥ +20", cost: 5000, sanity: 20 },
                    { text: "åœ¨å®¶ç¡è¦ºçœéŒ¢", sub: "é‡‘éŒ¢ -$0 / ç²¾ç¥ +5", cost: 0, sanity: 5 }
                ]
            },
            {
                npc: "ğŸ“‰ è²¡ç¶“æ–°è",
                text: "ã€å¤–è³‡å¤§é€ƒæ®ºï¼å°è‚¡é‡æŒ« 300 é»ï¼ã€ä½ çœ‹è‘—å‰›è²·çš„ ETF å¸³é¢è®Šç¶ è‰²...",
                choices: [
                    { text: "åš‡æ­»äº†ï¼Œè¶•å¿«è³£æ‰æ­¢æï¼", sub: "å¯¦ç¾è™§æ / ç²¾ç¥ -20", action: 'panic_sell' },
                    { text: "é—œæ‰ APPï¼Œå°ˆæ³¨æœ¬æ¥­", sub: "ç²¾ç¥ +5 / è¶Šè·Œè¶Šè²·", action: 'hold' }
                ]
            },
            {
                npc: "ğŸ± å­¤ç¨æ„Ÿè¥²ä¾†",
                text: "ä¸‹ç­å›åˆ°ç©ºè•©è•©çš„æˆ¿é–“ï¼Œå¥½æƒ³é¤Šä¸€éš»è²“é™ªä¼´...",
                choices: [
                    { text: "é ˜é¤Šè²“å’ª (åˆæœŸé–‹éŠ·)", sub: "é‡‘éŒ¢ -$5,000 / ç²¾ç¥ +30", cost: 5000, sanity: 30 },
                    { text: "è²·å€‹æŠ±æ•å°±å¥½", sub: "é‡‘éŒ¢ -$500 / ç²¾ç¥ +5", cost: 500, sanity: 5 }
                ]
            },
            {
                npc: "ğŸ•µï¸ ç¥ç§˜ç†è²¡å®¢",
                text: "ã€Œ00878 ç¾åœ¨æ˜¯ç›¸å°ä½é»ï¼Œå¡«æ¯ç´€éŒ„ä¹Ÿå¾ˆå¥½ã€‚ä½ è¦åŠ ç¢¼å—ï¼Ÿã€",
                choices: [
                    { text: "è½ä½ çš„ï¼ŒåŠ ç¢¼ä¸€å¼µï¼", sub: "é‡‘éŒ¢ -ç›®å‰è‚¡åƒ¹ / ç²¾ç¥ +10", action: 'buy_one' },
                    { text: "é‚„æ˜¯å†è§€æœ›ä¸€ä¸‹...", sub: "ç„¡è®Šå‹•", cost: 0, sanity: 0 }
                ]
            }
        ],
        3: [
            {
                npc: "âœˆï¸ æ—¥æœ¬æ—…éŠèª˜æƒ‘",
                text: "æ»‘ IG çœ‹åˆ°å¤§å®¶éƒ½åœ¨æ—¥æœ¬æ»‘é›ªã€åƒå’Œç‰›ã€‚ä½ å·²ç¶“ä¸‰å¹´æ²’å‡ºåœ‹äº†...",
                choices: [
                    { text: "åˆ·å¡ï¼æ±äº¬äº”å¤©å››å¤œ", sub: "é‡‘éŒ¢ -$35,000 / ç²¾ç¥ +60", cost: 35000, sanity: 60 },
                    { text: "å»åƒå£½å¸éƒè§£é¥", sub: "é‡‘éŒ¢ -$800 / ç²¾ç¥ -5", cost: 800, sanity: -5 }
                ]
            },
            {
                npc: "ğŸ‘¨â€ğŸ’¼ è€é—†",
                text: "ã€Œæœ€è¿‘å…¬å¸è¦å‡é·äº†ï¼Œä½ è¦ä¸è¦å»å ±åé‚£å€‹ 3 è¬å…ƒçš„åœ¨è·é€²ä¿®èª²ç¨‹ï¼Ÿã€",
                choices: [
                    { text: "æŠ•è³‡è‡ªå·±ï¼å ±åï¼", sub: "é‡‘éŒ¢ -$30,000 / è–ªæ°´å¯èƒ½å¢åŠ ", cost: 30000, action: 'promotion' },
                    { text: "ç®—äº†ï¼ŒçœéŒ¢é‡è¦", sub: "éŒ¯å¤±æ©Ÿæœƒ", cost: 0, sanity: 0 }
                ]
            },
            {
                npc: "ğŸ’º è·æ¥­å‚·å®³",
                text: "æ¯å¤©ä¹…åè…°ç— èƒŒç—›...æ˜¯ä¸æ˜¯è©²è²·å¼µå¥½ä¸€é»çš„äººé«”å·¥å­¸æ¤…ï¼Ÿ",
                choices: [
                    { text: "è²· Herman Miller (äºŒæ‰‹)", sub: "é‡‘éŒ¢ -$12,000 / ç²¾ç¥ +15", cost: 12000, sanity: 15 },
                    { text: "è²¼æ’’éš†å·´æ–¯å°±å¥½", sub: "é‡‘éŒ¢ -$200 / ç²¾ç¥ -5", cost: 200, sanity: -5 }
                ]
            },
            {
                npc: "ğŸ  è€åª½",
                text: "ã€Œéš”å£ç‹é˜¿å§¨çš„å…’å­è²·äº†æŒ‰æ‘©æ¤…çµ¦å¥¹è€¶...å®¶è£¡é‚£å°æ´—è¡£æ©Ÿå¥½åƒä¹Ÿå£äº†...ã€",
                choices: [
                    { text: "è²·æ–°æ´—è¡£æ©Ÿçµ¦å®¶è£¡", sub: "é‡‘éŒ¢ -$15,000 / ç²¾ç¥ +20", cost: 15000, sanity: 20 },
                    { text: "è£ä½œæ²’è½åˆ°", sub: "é‡‘éŒ¢ -$0 / ç²¾ç¥ -15", cost: 0, sanity: -15 }
                ]
            },
            {
                npc: "ğŸš— å¤§å­¸åŒå­¸",
                text: "ã€Œæ¬¸æˆ‘è²·ç‰¹æ–¯æ‹‰äº†ï¼å¸¥å§ï¼Ÿä½ é‚„åœ¨é¨é‚£å°èˆŠæ©Ÿè»Šé€šå‹¤å–”ï¼Ÿä¸ç†±å—ï¼Ÿã€",
                choices: [
                    { text: "æˆ‘ä¹Ÿè¦è²·è»Šï¼(è¢«æ¿€æ€’)", sub: "é ­æœŸæ¬¾ -$50,000 / ç²¾ç¥ +30", cost: 50000, sanity: 30 },
                    { text: "ç¬‘ç¬‘å¸¶é (é‚£æ˜¯è² å‚µ)", sub: "ç²¾ç¥ -5 / å®ˆä½è²¡å¯Œ", cost: 0, sanity: -5 }
                ]
            },
            {
                npc: "ğŸ’¼ ä¿éšªæ¥­å‹™å“¡",
                text: "ã€Œé€™å¼µå„²è“„éšªä¿å–®åˆ©ç‡å¾ˆé«˜ï¼Œè€Œä¸”é€è¡Œæç®±å–”ï¼ä¹Ÿæ˜¯å¹«æˆ‘åšæ¥­ç¸¾å•¦...ã€",
                choices: [
                    { text: "å¥½å•¦è²·äº† (äººæƒ…)", sub: "é‡‘éŒ¢ -$30,000 / è³‡é‡‘å¡æ­»", cost: 30000, sanity: -10 },
                    { text: "å …æŒæ‹’çµ•", sub: "ç²¾ç¥ -5 / å®ˆä½æµå‹•æ€§", cost: 0, sanity: -5 }
                ]
            }
        ],
        4: [ 
             {
                npc: "ğŸ•µï¸ ç¥ç§˜ç†è²¡å®¢",
                text: "ã€Œä½ çš„è³‡ç”¢è¦æ¨¡å·²ç¶“ä¸ä¸€æ¨£äº†ã€‚åªè¦å …æŒä¸‹å»ï¼Œé»æ˜å°±åœ¨çœ¼å‰ã€‚ã€",
                choices: [
                    { text: "å …æŒè‚¡æ¯å†æŠ•å…¥", sub: "åŠ é€Ÿè¤‡åˆ©", sanity: 5, cost: 0 }
                ]
             },
             {
                npc: "ğŸ“‰ å¸‚å ´å´©ç›¤",
                text: "è‚¡å¸‚é­é‡é»‘å¤©éµï¼Œä½ çš„è³‡ç”¢ç¸®æ°´äº† 20%ï¼ä½†ä½ çš„è‚¡æ¯æ”¶å…¥ä¾ç„¶ç©©å®šã€‚",
                choices: [
                    { text: "æ…Œå¼µæƒ³è³£è‚¡", sub: "ç²¾ç¥ -30", sanity: -30, cost: 0 },
                    { text: "é€™å°±æ˜¯è€ƒé©—ï¼Œæˆ‘ä¸è³£ï¼", sub: "ç²¾ç¥ +10", sanity: 10, cost: 0 }
                ]
             }
        ]
    };

    class Game {
        constructor() {
            this.state = {
                month: 0,
                cash: 50000,
                sanity: 80,
                level: 1,
                expense: CONFIG.baseExpense,
                shares: 0, 
                stockPrice: 15.00,
            };
            this.init();
        }

        init() {
            this.showModal("ğŸ“– åºç« ï¼šè¢«å›°ä½çš„æ»¾è¼ª", 
                "ä½ æ˜¯ä¸€å 30 æ­²çš„å¹³å‡¡ä¸Šç­æ—ã€‚\nè–ªæ°´ 35,000 å…ƒï¼Œæ‰£æ‰æˆ¿ç§Ÿç”Ÿæ´»è²»ï¼Œæ¯å€‹æœˆå¹¾ä¹å­˜ä¸åˆ°éŒ¢ã€‚\n\nä½ çœ‹ä¼¼å®‰ç©©ï¼Œå…¶å¯¦æ­£è™•æ–¼å±éšªé‚Šç·£ã€‚\nç›®æ¨™ï¼šåœ¨ 60 æ­²å‰ï¼Œç”¨é€™ä»½æ­»è–ªæ°´ï¼Œæ‰“é€ å‡ºèƒ½é¤Šæ´»ä½ çš„ã€Œç¾é‡‘æµè­·ç›¾ã€ã€‚");
            this.updateUI();
            this.nextMonth();
        }

        nextMonth() {
            this.state.month++;
            this.state.expense *= (1 + CONFIG.inflation);
            const monthlySave = CONFIG.salary - Math.floor(this.state.expense);
            this.state.cash += monthlySave;
            this.state.sanity -= 3; 

            const change = (Math.random() * 0.1) - 0.04; 
            this.state.stockPrice *= (1 + change);
            if(this.state.stockPrice < 10) this.state.stockPrice = 10;

            let dividend = 0;
            if ((this.state.month) % 3 === 0 && this.state.shares > 0) {
                dividend = Math.floor(this.state.shares * this.state.stockPrice * 1000 * CONFIG.yield);
                this.state.cash += dividend;
                if(dividend > 0) this.showToast(`ğŸ’° é ˜åˆ°è‚¡æ¯ï¼š$${dividend.toLocaleString()}`);
            }

            if (this.state.sanity < 30) {
                if (Math.random() > 0.4) {
                    const lost = Math.floor(Math.random() * 5000) + 3000;
                    this.state.cash -= lost;
                    this.state.sanity = 60; 
                    this.showModal("ğŸ’¥ ç²¾ç¥å´©æ½°ï¼", `å£“åŠ›å¤ªå¤§ç†æ™ºæ–·ç·šï¼\nè·‘å»åƒç‡’è‚‰åˆèª²é‡‘æ‰‹éŠï¼Œå™´äº† $${lost}ã€‚\n(ç²¾ç¥å€¼æ¢å¾©ï¼Œä½†éŒ¢åŒ…å¤§å¤±è¡€)`);
                } else {
                    this.showToast("âš ï¸ ç²¾ç¥å€¼ç€•è‡¨æ¥µé™...");
                }
            }

            this.checkProgress(dividend);

            if (this.state.cash < 0) {
                 this.triggerGameOver();
            } else {
                 this.generateEvent();
